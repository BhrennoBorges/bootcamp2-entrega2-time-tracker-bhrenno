(async()=>{const{overlayEnabled=!0}=await chrome.storage.sync.get(["overlayEnabled"]);const e=location.hostname;let t=!1,n=null;function o(e){const t=Math.floor(e/3600).toString().padStart(2,"0"),n=Math.floor(e%3600/60).toString().padStart(2,"0"),o=Math.floor(e%60).toString().padStart(2,"0");return`${t}:${n}:${o}`}function a(){if(!overlayEnabled)return null;let e=document.getElementById("breno-time-badge");return e||(e=document.createElement("div"),e.id="breno-time-badge",e.innerHTML='<b>Tempo neste site:</b> <span id="breno-time">â€”</span>',document.documentElement.appendChild(e)),e}async function s(){if("visible"!==document.visibilityState)return;try{const t=await chrome.runtime.sendMessage({type:"TICK",host:e});if(t&&"number"==typeof t.totalSec){const e=document.getElementById("breno-time");e&&(e.textContent=o(t.totalSec))}}catch{}}function r(){t||(t=!0,a(),n=setInterval(s,1e3))}function c(){t=!1,clearInterval(n),n=null}r(),document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState?r():c()})),window.addEventListener("focus",r),window.addEventListener("blur",c);try{const t=await chrome.runtime.sendMessage({type:"GET_TOTAL",host:e}),n=document.getElementById("breno-time");n&&t&&"number"==typeof t.totalSec&&(n.textContent=o(t.totalSec))}catch{}})();